:root,
::backdrop {
  --fb-global-radius: 0.4rem;
  --fb-alert-border-radius: var(--fb-global-radius);
  --fb-global-shadow-lw: 0 2px 2px 0 #0000001a;
  --fb-alert-shadow: var(--fb-global-shadow-lw);
  --fb-alert-border-width: 0px;
  --fb-alert-border-left-width: 5px;
  --fb-alert-border-color: inherit;
  --fb-code-font-size: 1rem;

  /* Spacing variables */
  --fb-spacing-xs: 0.1rem;
  --fb-spacing-sm: 0.25rem;
  --fb-spacing-md: 0.3rem;
  --fb-spacing-lg: 0.5rem;
  --fb-spacing-xl: 0.75rem;
  --fb-spacing-2xl: 1rem;
  --fb-spacing-3xl: 3.5rem;

  --fb-alert-background-color: inherit;
  --fb-alert-background-color-highlight: inherit;
  --fb-alert-foreground-color: inherit;
  --fb-alert-padding-horizontal: var(--fb-spacing-2xl);
  --fb-alert-padding-vertical: var(--fb-spacing-2xl);

  /* Info/Note colors */
  --fb-color-info-dark: #4cb3d4;
  --fb-color-info-contrast-background: #eef9fd;
  --fb-color-info-contrast-foreground: #193c47;
  --fb-color-info-contrast-background-highlight: #54c7ec26;

  /* Danger colors */
  --fb-color-danger-dark: #e13238;
  --fb-color-danger-contrast-background: #ffebec;
  --fb-color-danger-contrast-foreground: #4b1113;
  --fb-color-danger-contrast-background-highlight: #fa383e26;

  /* Success/Tip colors */
  --fb-color-success-dark: #009400;
  --fb-color-success-contrast-background: #e6f6e6;
  --fb-color-success-contrast-foreground: #003100;
  --fb-color-success-contrast-background-highlight: #00a40026;

  /* Warning/Caution colors */
  --fb-color-warning-dark: #e6a700;
  --fb-color-warning-contrast-background: #fff8e6;
  --fb-color-warning-contrast-foreground: #4d3800;
  --fb-color-warning-contrast-background-highlight: #ffba0026;
}

:root[data-theme='dark'] {
  --fb-color-info-contrast-background: #193c47;
  --fb-color-info-contrast-foreground: #eef9fd;
  --fb-color-warning-contrast-background: #4d3800;
  --fb-color-warning-contrast-foreground: #fff8e6;
  --fb-color-danger-contrast-background: #4b1113;
  --fb-color-danger-contrast-foreground: #ffebec;
  --fb-color-success-contrast-background: #003100;
  --fb-color-success-contrast-foreground: #e6f6e6;
}

.starlight-aside {
  --sl-code-background: var(--fb-alert-background-color-highlight);
  --sl-link-color: var(--fb-alert-foreground-color);
  --sl-link-hover-color: var(--fb-alert-foreground-color);
  --sl-link-decoration: underline;
  --sl-tabs-color: var(--fb-alert-foreground-color);
  --sl-tabs-color-active: var(--fb-alert-foreground-color);
  --sl-tabs-color-active-border: var(--fb-alert-border-color);

  background-color: var(--fb-alert-background-color);
  border: var(--fb-alert-border-width) solid var(--fb-alert-border-color);
  border-left-width: var(--fb-alert-border-left-width);
  border-radius: var(--fb-alert-border-radius);
  box-shadow: var(--fb-alert-shadow);
  color: var(--fb-alert-foreground-color) !important;
  padding: var(--fb-alert-padding-vertical) var(--fb-alert-padding-horizontal);
  border-inline-start: var(--fb-spacing-sm) solid var(--sl-color-asides-border);
  

  /* Code styling within asides */
  & code {
    border-radius: var(--fb-global-radius) !important;
    font-family: var(--font-mono) !important;
    font-size: var(--fb-code-font-size) !important;
    padding: 0 var(--fb-spacing-md) !important;
    border: .150rem solid rgba(0, 0, 0, .1) !important;
    background-color: var(--fb-alert-background-color-highlight) !important;
    display: inline-block !important;
    line-height: 1.8 !important;
    vertical-align: middle !important;
    color: var(--fb-alert-foreground-color) !important;
  }

  & a {
    color: var(--fb-alert-foreground-color);
    text-decoration-color: var(--fb-alert-border-color);
  }

  & a:hover {
    text-decoration-thickness: 2px;
  }

  & .expressive-code {
    box-shadow: none !important;
  }

  & .expressive-code pre {
    min-height: var(--fb-spacing-3xl) !important;
  }

  & .expressive-code code {
    border-color: var(--fb-alert-border-color) !important;
    padding-top: var(--fb-spacing-xl) !important;
    border: none !important;
  }

  /* Expressive code title styling within asides */
  & .expressive-code .frame.has-title:not(.is-terminal) .title,
  & .expressive-code .frame .title {
    background-color: var(--fb-alert-background-color) !important;
    color: var(--fb-alert-foreground-color) !important;
    width: 100% !important;
  }

  & .expressive-code .frame.has-title:not(.is-terminal) code,
  & .expressive-code .frame code {
    border-top-left-radius: 0 !important;
    border-top-right-radius: 0 !important; 
  }

  /* Table header styling within asides */
  & table thead th {
    background-color: var(--fb-alert-background-color) !important;
  }

  /* Table alternating row styling within asides */
  & table tbody tr:nth-child(2n) {
    background-color: var(--fb-alert-background-color-highlight) !important;
  }

}

.starlight-aside--note {
  --fb-alert-background-color: var(--fb-color-info-contrast-background);
  --fb-alert-background-color-highlight: var(--fb-color-info-contrast-background-highlight);
  --fb-alert-foreground-color: var(--fb-color-info-contrast-foreground);
  --fb-alert-border-color: var(--fb-color-info-dark);
  --sl-color-asides-text-accent: var(--fb-alert-foreground-color);
  --sl-color-asides-border: var(--fb-alert-border-color);
}

.starlight-aside--tip {
  --fb-alert-background-color: var(--fb-color-success-contrast-background);
  --fb-alert-background-color-highlight: var(--fb-color-success-contrast-background-highlight);
  --fb-alert-foreground-color: var(--fb-color-success-contrast-foreground);
  --fb-alert-border-color: var(--fb-color-success-dark);
  --sl-color-asides-text-accent: var(--fb-alert-foreground-color);
  --sl-color-asides-border: var(--fb-alert-border-color);
}

.starlight-aside--caution {
  --fb-alert-background-color: var(--fb-color-warning-contrast-background);
  --fb-alert-background-color-highlight: var(--fb-color-warning-contrast-background-highlight);
  --fb-alert-foreground-color: var(--fb-color-warning-contrast-foreground);
  --fb-alert-border-color: var(--fb-color-warning-dark);
  --sl-color-asides-text-accent: var(--fb-alert-foreground-color);
  --sl-color-asides-border: var(--fb-alert-border-color);
}

.starlight-aside--danger {
  --fb-alert-background-color: var(--fb-color-danger-contrast-background);
  --fb-alert-background-color-highlight: var(--fb-color-danger-contrast-background-highlight);
  --fb-alert-foreground-color: var(--fb-color-danger-contrast-foreground);
  --fb-alert-border-color: var(--fb-color-danger-dark);
  --sl-color-asides-text-accent: var(--fb-alert-foreground-color);
  --sl-color-asides-border: var(--fb-alert-border-color);
}

.starlight-aside__title {
  display: flex;
  gap: var(--fb-spacing-lg) !important;
  align-items: center;
  font-size: var(--sl-text-h5);
  font-weight: 600;
  line-height: var(--sl-line-height-headings);
  color: var(--sl-color-asides-text-accent);
  text-transform: uppercase;
  margin-bottom: var(--fb-spacing-lg) !important;
}